import{e as W,l as X,d as Y}from"./chargingstation-Cs5Beacx.js";import{x as Z,j as g,d as G,q as P,s as h,y as ee,c as U,a as l,r as s,f as e,g as le,k as d,o as C,E as j,z as te,b as ae,F as oe,A as ne,w as se,n as F,_ as ue}from"./index-Bwi5gLBw.js";const H=Z("station",()=>{const k={name:"",id:"",city:"",person:"",tel:"",fast:"",slow:"",status:1,now:"",fault:""},f=g(k);return{rowData:f,setRowData:a=>{f.value=a},resetRowData:()=>{f.value=k}}}),re={class:"dialog-footer"},de=G({__name:"StationForm",props:{dialogVisible:{type:Boolean,required:!0}},emits:["close","reload"],setup(k,{emit:f}){const m=k,z=f,a=g({name:"",id:"",city:"",person:"",tel:"",fast:"",slow:"",status:1,now:"",fault:""}),R=P({name:[{required:!0,message:"站点名称不能为空",trigger:"blur"}],id:[{required:!0,message:"站点id不能为空",trigger:"blur"}],city:[{required:!0,message:"所属城市不能为空",trigger:"blur"}],person:[{required:!0,message:"站点负责人不能为空",trigger:"blur"}],tel:[{required:!0,message:"负责人电话不能为空",trigger:"blur"}],fast:[{required:!0,message:"快充数不能为空",trigger:"blur"}],slow:[{required:!0,message:"慢充数不能为空",trigger:"blur"}],status:[{required:!0,message:"充电站状态不能为空",trigger:"blur"}],now:[{required:!0,message:"正在充电数不能为空",trigger:"blur"}],fault:[{required:!0,message:"故障数量不能为空",trigger:"blur"}]}),w=()=>{z("close")},v=H(),{rowData:x}=h(v),b=g(!1);ee(()=>m.dialogVisible,()=>{x.value.name?b.value=!0:b.value=!1,a.value=x.value});const A=g(),D=()=>{var S;(S=A.value)==null||S.validate(async o=>{if(o){const r=await W(a.value);r.code===200&&(j({message:r.data,type:"success"}),w(),z("reload"))}})};return(S,o)=>{const r=s("el-input"),i=s("el-form-item"),B=s("el-col"),V=s("el-option"),c=s("el-select"),t=s("el-row"),_=s("el-form"),q=s("el-button"),N=s("el-dialog");return C(),U(N,{"model-value":k.dialogVisible,title:"新增充电站",onClose:w,"destroy-on-close":""},{footer:l(()=>[le("div",re,[e(q,{onClick:w},{default:l(()=>o[10]||(o[10]=[d("取消")])),_:1}),e(q,{type:"primary",onClick:D},{default:l(()=>o[11]||(o[11]=[d(" 确认 ")])),_:1})])]),default:l(()=>[e(_,{"label-width":"120",rules:R,model:a.value,ref_key:"formRef",ref:A},{default:l(()=>[e(t,null,{default:l(()=>[e(B,{span:12},{default:l(()=>[e(i,{label:"站点名称：",prop:"name"},{default:l(()=>[e(r,{modelValue:a.value.name,"onUpdate:modelValue":o[0]||(o[0]=n=>a.value.name=n)},null,8,["modelValue"])]),_:1}),e(i,{label:"站点ID：",prop:"id"},{default:l(()=>[e(r,{modelValue:a.value.id,"onUpdate:modelValue":o[1]||(o[1]=n=>a.value.id=n),disabled:b.value},null,8,["modelValue","disabled"])]),_:1}),e(i,{label:"所属城市：",prop:"city"},{default:l(()=>[e(r,{modelValue:a.value.city,"onUpdate:modelValue":o[2]||(o[2]=n=>a.value.city=n)},null,8,["modelValue"])]),_:1}),e(i,{label:"站点负责人：",prop:"person"},{default:l(()=>[e(r,{modelValue:a.value.person,"onUpdate:modelValue":o[3]||(o[3]=n=>a.value.person=n)},null,8,["modelValue"])]),_:1}),e(i,{label:"负责人电话：",prop:"tel"},{default:l(()=>[e(r,{modelValue:a.value.tel,"onUpdate:modelValue":o[4]||(o[4]=n=>a.value.tel=n)},null,8,["modelValue"])]),_:1})]),_:1}),e(B,{span:12},{default:l(()=>[e(i,{label:"快充数：",prop:"fast"},{default:l(()=>[e(r,{modelValue:a.value.fast,"onUpdate:modelValue":o[5]||(o[5]=n=>a.value.fast=n)},null,8,["modelValue"])]),_:1}),e(i,{label:"慢充数：",prop:"slow"},{default:l(()=>[e(r,{modelValue:a.value.slow,"onUpdate:modelValue":o[6]||(o[6]=n=>a.value.slow=n)},null,8,["modelValue"])]),_:1}),e(i,{label:"充电站状态：",prop:"status"},{default:l(()=>[e(c,{placeholder:"充电站状态",modelValue:a.value.status,"onUpdate:modelValue":o[7]||(o[7]=n=>a.value.status=n),disabled:b.value},{default:l(()=>[e(V,{label:"全部",value:1}),e(V,{label:"使用中",value:2}),e(V,{label:"空闲中",value:3}),e(V,{label:"维护中",value:4}),e(V,{label:"待维修",value:5})]),_:1},8,["modelValue","disabled"])]),_:1}),e(i,{label:"正在充电：",prop:"now"},{default:l(()=>[e(r,{modelValue:a.value.now,"onUpdate:modelValue":o[8]||(o[8]=n=>a.value.now=n),disabled:b.value},null,8,["modelValue","disabled"])]),_:1}),e(i,{label:"故障数：",prop:"fault"},{default:l(()=>[e(r,{modelValue:a.value.fault,"onUpdate:modelValue":o[9]||(o[9]=n=>a.value.fault=n),disabled:b.value},null,8,["modelValue","disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["model-value"])}}}),ie=G({__name:"Monitor",setup(k){const f=g("name"),m=P({input:"",value:1}),z=g([]),a=P({page:1,pageSize:10}),R=g(0),w=g(!1),v=async()=>{w.value=!0;const{data:{list:c,total:t}}=await X({...a,status:m.value,[f.value]:m.input});w.value=!1,z.value=c,R.value=t},x=()=>{v()},b=()=>{v()},A=()=>{a.page=1,a.pageSize=10,m.input="",m.value=1,f.value="name",v()};te(()=>{v()});const D=g(!1),S=H(),{setRowData:o,resetRowData:r}=S,i=c=>{o(c),D.value=!0},B=()=>{r(),D.value=!0},V=async c=>{try{const t=await Y(c);t.code===200&&j({message:t.data,type:"success"})}catch{j({message:"删除失败",type:"error"})}v()};return(c,t)=>{const _=s("el-option"),q=s("el-select"),N=s("el-input"),n=s("el-col"),y=s("el-button"),T=s("el-row"),I=s("el-card"),M=s("el-statistic"),p=s("el-table-column"),$=s("el-tag"),J=s("el-popconfirm"),K=s("el-table"),L=s("el-pagination"),O=ne("loading");return C(),ae(oe,null,[e(I,null,{default:l(()=>[e(T,{gutter:20},{default:l(()=>[e(n,{span:6},{default:l(()=>[e(N,{modelValue:m.input,"onUpdate:modelValue":t[1]||(t[1]=u=>m.input=u),modelModifiers:{trim:!0},placeholder:"请输入名称、id"},{append:l(()=>[e(q,{modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=u=>f.value=u),style:{width:"115px"}},{default:l(()=>[e(_,{label:"按名称查询",value:"name"}),e(_,{label:"按ID查询",value:"id"})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),e(n,{span:6},{default:l(()=>[e(q,{placeholder:"充电站状态",modelValue:m.value,"onUpdate:modelValue":t[2]||(t[2]=u=>m.value=u)},{default:l(()=>[e(_,{label:"全部",value:1}),e(_,{label:"使用中",value:2}),e(_,{label:"空闲中",value:3}),e(_,{label:"维护中",value:4}),e(_,{label:"待维修",value:5})]),_:1},8,["modelValue"])]),_:1}),e(n,{span:6},{default:l(()=>[e(y,{color:"#ffaab8",onClick:v},{default:l(()=>t[7]||(t[7]=[d("查询")])),_:1}),e(y,{color:"pink",style:{color:"#ff7f9f"},plain:"",onClick:A},{default:l(()=>t[8]||(t[8]=[d("重置")])),_:1})]),_:1})]),_:1})]),_:1}),e(I,{class:"mt"},{default:l(()=>[e(T,null,{default:l(()=>[e(n,{span:6},{default:l(()=>[e(M,{title:"累计充电量（度）",value:268500})]),_:1}),e(n,{span:6},{default:l(()=>[e(M,{title:"累计充电次数（次）",value:12600})]),_:1}),e(n,{span:6},{default:l(()=>[e(M,{title:"服务区域（个）",value:88})]),_:1}),e(n,{span:6},{default:l(()=>[e(M,{title:"累计效益（元）",value:73418974})]),_:1})]),_:1})]),_:1}),e(I,{class:"mt"},{default:l(()=>[e(y,{type:"primary",color:"#ffaab8",icon:"Plus",size:"default",onClick:B},{default:l(()=>t[9]||(t[9]=[d("新增充电站")])),_:1})]),_:1}),e(I,{class:"mt"},{default:l(()=>[se((C(),U(K,{data:z.value,style:{width:"100%"}},{default:l(()=>[e(p,{type:"index",width:"70",label:"序号"}),e(p,{prop:"name",label:"站点名称"}),e(p,{prop:"id",label:"站点ID"}),e(p,{prop:"city",label:"所属城市"}),e(p,{prop:"fast",label:"快充数"}),e(p,{prop:"slow",label:"慢充数"}),e(p,{prop:"status",label:"充电站状态"},{default:l(u=>[u.row.status===2?(C(),U($,{key:0,type:"primary"},{default:l(()=>t[10]||(t[10]=[d("使用中")])),_:1})):F("",!0),u.row.status===3?(C(),U($,{key:1,type:"success"},{default:l(()=>t[11]||(t[11]=[d("空闲中")])),_:1})):F("",!0),u.row.status===4?(C(),U($,{key:2,type:"warning"},{default:l(()=>t[12]||(t[12]=[d("维修中")])),_:1})):F("",!0),u.row.status===5?(C(),U($,{key:3,type:"danger"},{default:l(()=>t[13]||(t[13]=[d("待维修")])),_:1})):F("",!0)]),_:1}),e(p,{prop:"now",label:"正在充电"}),e(p,{prop:"fault",label:"故障数"}),e(p,{prop:"person",label:"站点负责人"}),e(p,{prop:"tel",label:"负责人电话"}),e(p,{label:"操作"},{default:l(u=>[e(y,{color:"#ff7f9f",onClick:E=>i(u.row),size:"small"},{default:l(()=>t[14]||(t[14]=[d("编辑")])),_:2},1032,["onClick"]),e(J,{title:"确定删除？"},{reference:l(()=>[e(y,{color:"grey",style:{color:"white"},size:"small",onClick:E=>V(u.row.id)},{default:l(()=>t[15]||(t[15]=[d("删除")])),_:2},1032,["onClick"])]),actions:l(({confirm:E,cancel:Q})=>[e(y,{size:"small",onClick:Q,color:"grey"},{default:l(()=>t[16]||(t[16]=[d("不")])),_:2},1032,["onClick"]),e(y,{type:"danger",size:"small",onClick:E},{default:l(()=>t[17]||(t[17]=[d(" 确定？ ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[O,w.value]]),e(L,{class:"fr mb mt","current-page":a.page,"onUpdate:currentPage":t[3]||(t[3]=u=>a.page=u),"page-size":a.pageSize,"onUpdate:pageSize":t[4]||(t[4]=u=>a.pageSize=u),"page-sizes":[10,20,30,40],layout:"sizes, prev, pager, next, jumper,total ",total:R.value,onSizeChange:x,onCurrentChange:b},null,8,["current-page","page-size","total"])]),_:1}),e(de,{"dialog-visible":D.value,onClose:t[5]||(t[5]=u=>D.value=!1),onReload:t[6]||(t[6]=u=>v())},null,8,["dialog-visible"])],64)}}}),fe=ue(ie,[["__scopeId","data-v-525ab137"]]);export{fe as default};
