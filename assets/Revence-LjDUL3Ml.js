import{r as j,a as E}from"./chargingstation-Cs5Beacx.js";import{u as M}from"./useChart-Cn3yY24v.js";import{j as b,q as D,d as $,z as q,b as L,f as e,a as l,r as d,g as t,t as y,i as c,w as O,A as G,c as H,k as S,o as k,_ as J}from"./index-Bwi5gLBw.js";function K(f,_=10){const m=b(0),o=D({page:1,pageSize:_});return{totals:m,pageInfo:o,handleCurrentChange:r=>{o.page=r,f()},handleSizeChange:r=>{o.pageSize=r,f()},resetPagination:()=>{o.page=1,o.pageSize=_},setTotal:r=>{m.value=r}}}function A(f){if(typeof f!="number"||isNaN(f))throw new Error("必须是一个有效数字");const[_,m]=f.toString().split(".");let o="";for(let u=_.length-1;u>=0;u--)o=_[u]+o,(_.length-u)%3===0&&u!==0&&(o=","+o);return m?`${o}.${m}`:o}const Q={class:"title"},W={class:"round"},X={class:"total mt"},Y={class:"title"},Z={class:"round"},ee={class:"total mt"},te={class:"title"},ae={class:"round"},le={class:"title"},ne={class:"round"},se={class:"title"},oe={class:"round"},re={class:"title"},ie={class:"round"},de=$({__name:"Revence",setup(f){const _=async()=>{const p=D({tooltip:{trigger:"axis",axisPointer:{type:"cross",crossStyle:{color:"#999"}}},toolbox:{feature:{magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},legend:{data:[]},xAxis:[{type:"category",data:["一月","二月","三月","四月","五月","六月","七月"],axisPointer:{type:"shadow"}}],yAxis:[{type:"value",name:"",min:0,max:250,interval:50},{type:"value",name:"",min:0,max:1e3,interval:100}],series:[{name:"",type:"bar",data:[]},{name:"",type:"line",yAxisIndex:1,data:[]}]}),a=await E();p.legend.data=a.data.list.map(n=>n.name);for(let n=0;n<a.data.list.length;n++)p.yAxis[n].name=a.data.list[n].name,p.series[n].name=a.data.list[n].name,p.series[n].data=a.data.list[n].data;return p},m=b(null),o=b(!1),u=b([]),w=b("");M(m,_);const C=async()=>{o.value=!0;const{data:{list:p,total:a}}=await j({page:r.page,pageSize:r.pageSize,name:w.value});T(a),u.value=p,o.value=!1,u.value=p.map(n=>({...n,day:n.electricity+n.parkingFee+n.serviceFee+n.member}))};q(()=>{C()});const{totals:x,pageInfo:r,handleCurrentChange:I,handleSizeChange:P,setTotal:T}=K(C);return(p,a)=>{const n=d("Document"),v=d("el-icon"),g=d("el-card"),h=d("el-col"),N=d("el-row"),V=d("el-button"),B=d("el-input"),i=d("el-table-column"),z=d("el-tag"),F=d("el-table"),R=d("el-pagination"),U=G("loading");return k(),L("div",null,[e(N,{gutter:20},{default:l(()=>[e(h,{span:4},{default:l(()=>[e(g,null,{default:l(()=>[t("div",Q,[t("div",W,[e(v,null,{default:l(()=>[e(n)]),_:1})]),a[3]||(a[3]=t("h4",null,"今日总收入（元）",-1))]),t("div",X,[t("h1",null,y(c(A)(234567)),1),a[4]||(a[4]=t("div",{class:"percent"},"-21%",-1))])]),_:1})]),_:1}),e(h,{span:4},{default:l(()=>[e(g,null,{default:l(()=>[t("div",Y,[t("div",Z,[e(v,null,{default:l(()=>[e(n)]),_:1})]),a[5]||(a[5]=t("h4",null,"今日总收入（元）",-1))]),t("div",ee,[t("h1",null,y(c(A)(1223.33)),1),a[6]||(a[6]=t("div",{class:"percent"},"-21%",-1))])]),_:1})]),_:1}),e(h,{span:4},{default:l(()=>[e(g,null,{default:l(()=>[t("div",te,[t("div",ae,[e(v,null,{default:l(()=>[e(n)]),_:1})]),a[7]||(a[7]=t("h4",null,"今日总收入（元）",-1))]),a[8]||(a[8]=t("div",{class:"total mt"},[t("h1",null,"234,413"),t("div",{class:"percent"},"-21%")],-1))]),_:1})]),_:1}),e(h,{span:4},{default:l(()=>[e(g,null,{default:l(()=>[t("div",le,[t("div",ne,[e(v,null,{default:l(()=>[e(n)]),_:1})]),a[9]||(a[9]=t("h4",null,"今日总收入（元）",-1))]),a[10]||(a[10]=t("div",{class:"total mt"},[t("h1",null,"2,567"),t("div",{class:"percent"},"-21%")],-1))]),_:1})]),_:1}),e(h,{span:4},{default:l(()=>[e(g,null,{default:l(()=>[t("div",se,[t("div",oe,[e(v,null,{default:l(()=>[e(n)]),_:1})]),a[11]||(a[11]=t("h4",null,"今日总收入（元）",-1))]),a[12]||(a[12]=t("div",{class:"total mt"},[t("h1",null,"5,067"),t("div",{class:"percent"},"-21%")],-1))]),_:1})]),_:1}),e(h,{span:4},{default:l(()=>[e(g,null,{default:l(()=>[t("div",re,[t("div",ie,[e(v,null,{default:l(()=>[e(n)]),_:1})]),a[13]||(a[13]=t("h4",null,"今日总收入（元）",-1))]),a[14]||(a[14]=t("div",{class:"total mt"},[t("h1",null,"1,234,567"),t("div",{class:"percent"},"-21%")],-1))]),_:1})]),_:1})]),_:1}),e(g,{class:"mt"},{default:l(()=>[t("div",{ref_key:"chartRef",ref:m,style:{width:"100%",height:"300px"}},null,512)]),_:1}),e(g,{class:"mt"},{default:l(()=>[e(B,{modelValue:w.value,"onUpdate:modelValue":a[0]||(a[0]=s=>w.value=s),modelModifiers:{trim:!0},placeholder:"请输入站点名称",style:{width:"400px"}},{append:l(()=>[e(V,{icon:"Search",onClick:C})]),_:1},8,["modelValue"]),O((k(),H(F,{data:u.value},{default:l(()=>[e(i,{type:"index",width:"70",label:"序号"}),e(i,{prop:"name",label:"站点名称"}),e(i,{prop:"id",label:"站点ID"}),e(i,{prop:"city",label:"所属城市"}),e(i,{prop:"count",label:"充电桩总量（个）"}),e(i,{prop:"day",label:"单日总收入（元）",sortable:""},{default:l(s=>[t("span",null,y(s.row.day),1),e(z,{class:"ml",type:s.row.percent>0?"success":"danger"},{default:l(()=>[S(y(s.row.percent>0?"+"+s.row.percent:s.row.percent),1)]),_:2},1032,["type"])]),_:1}),e(i,{prop:"month",label:"月度总收入（万元）"},{default:l(s=>[t("span",null,y(s.row.month),1),e(z,{class:"ml",type:s.row.mpercent>0?"success":"danger"},{default:l(()=>[S(y(s.row.mpercent>0?"+"+s.row.mpercent:s.row.mpercent),1)]),_:2},1032,["type"])]),_:1}),e(i,{prop:"electricity",label:"电费营收（元）"}),e(i,{prop:"parkingFee",label:"停车费营收（元）"}),e(i,{prop:"serviceFee",label:"服务费营收（元）"}),e(i,{prop:"member",label:"会员储值金（元）"})]),_:1},8,["data"])),[[U,o.value]]),e(R,{class:"fr mb mt","current-page":c(r).page,"onUpdate:currentPage":a[1]||(a[1]=s=>c(r).page=s),"page-size":c(r).pageSize,"onUpdate:pageSize":a[2]||(a[2]=s=>c(r).pageSize=s),"page-sizes":[10,20,30,40],layout:"sizes, prev, pager, next, jumper,total ",total:c(x),onSizeChange:c(P),onCurrentChange:c(I)},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])]),_:1})])}}}),_e=J(de,[["__scopeId","data-v-8d59787d"]]);export{_e as default};
